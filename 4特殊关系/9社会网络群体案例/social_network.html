<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>红色数理 - 社区和谐与精准帮扶</title>
    <link rel="stylesheet" href="social_network.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@400;700&family=Outfit:wght@300;400;600&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
</head>

<body>
    <div class="app-container">
        <header class="main-header">
            <div class="header-content">
                <h1>红色数理 <span class="highlight">社区和谐与精准帮扶</span></h1>
                <p class="subtitle">Community Harmony Through Equivalence Relations & Targeted Support</p>
            </div>
            <div class="header-controls">
                <button class="action-btn primary" id="analyzeBtn">
                    <span class="icon">🔍</span>
                    <span>网格摸排</span>
                </button>
                <button class="action-btn success" id="distributeBtn" disabled>
                    <span class="icon">🎁</span>
                    <span>精准服务</span>
                </button>
                <button class="action-btn secondary" id="connectIsolatedBtn">
                    <span class="icon">🤝</span>
                    <span>融合孤岛</span>
                </button>
                <button class="action-btn" id="resetBtn">
                    <span class="icon">🔄</span>
                </button>
            </div>
        </header>

        <main class="main-stage">
            <div class="canvas-container">
                <canvas id="networkCanvas"></canvas>
                <div class="canvas-overlay">
                    <div class="mode-indicator" id="modeIndicator">
                        <strong>绘图模式</strong>
                        <p>点击空白处添加居民 | 按住Shift拖拽建立联系</p>
                    </div>
                    <div class="legend" id="legendBox" style="display:none;">
                        <h4>社区网格图例</h4>
                        <div id="legendItems"></div>
                    </div>
                </div>
            </div>

            <aside class="sidebar">
                <div class="panel-section stats-panel">
                    <h3>📊 社区数据</h3>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <div class="stat-icon">👥</div>
                            <div class="stat-info">
                                <span class="stat-value" id="nodeCount">0</span>
                                <span class="stat-label">居民总数</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">🔗</div>
                            <div class="stat-info">
                                <span class="stat-value" id="edgeCount">0</span>
                                <span class="stat-label">互助纽带</span>
                            </div>
                        </div>
                        <div class="stat-item highlight">
                            <div class="stat-icon">🏘️</div>
                            <div class="stat-info">
                                <span class="stat-value" id="communityCount">—</span>
                                <span class="stat-label">社区网格数</span>
                            </div>
                        </div>
                        <div class="stat-item warning" id="isolatedStats" style="display:none;">
                            <div class="stat-icon">⚠️</div>
                            <div class="stat-info">
                                <span class="stat-value" id="isolatedCount">0</span>
                                <span class="stat-label">孤岛节点</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel-section">
                    <h3>📐 等价关系定义</h3>
                    <div class="math-box">
                        <p><strong>连通性等价关系 $\sim$：</strong></p>
                        <p>$a \sim b \iff$ 存在路径连接 $a$ 和 $b$</p>
                        <div class="property-list">
                            <div class="property">✓ 自反性：$a \sim a$</div>
                            <div class="property">✓ 对称性：$a \sim b \Rightarrow b \sim a$</div>
                            <div class="property">✓ 传递性：$a \sim b, b \sim c \Rightarrow a \sim c$</div>
                        </div>
                        <p><strong>等价类（社区网格）：</strong></p>
                        <p>$[a] = \{x \mid x \sim a\}$ = 连通分量</p>
                    </div>
                </div>

                <div class="panel-section">
                    <h3>💡 思政启示</h3>
                    <div class="insight-card">
                        <p><strong>"一个都不能少"的治理理念</strong></p>
                        <p>通过等价关系理论，我们可以：</p>
                        <ul>
                            <li><strong>科学摸排</strong>：识别社区结构，发现弱势群体</li>
                            <li><strong>精准施策</strong>：确保资源（教育、医疗）公平分配</li>
                            <li><strong>主动融合</strong>：建立纽带，消除"孤岛"现象</li>
                            <li><strong>共同富裕</strong>：让每个群体都融入发展大局</li>
                        </ul>
                    </div>
                </div>

                <div class="panel-section" id="communityPanel" style="display:none;">
                    <h3>🏘️ 网格详情</h3>
                    <div id="communityList" class="community-list"></div>
                </div>
            </aside>
        </main>
    </div>

    <script src="social_network.js"></script>

<!-- 固定底部版权信息 -->
<footer style="
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: linear-gradient(135deg, #D63B1D 0%, #B8321A 100%);
    color: white;
    padding: 15px 10px;
    text-align: center;
    box-shadow: 0 -4px 20px rgba(214, 59, 29, 0.25);
    z-index: 9999;
">
    <p style="font-size: 0.9rem; line-height: 1.6; margin: 0; opacity: 0.95;">
        © 2025 湖南信息学院 ｜ 计算机科学与工程思政库建设团队<br>
        版权所有 ｜ 项目总负责人：谢鑫
    </p>
</footer>


</body>

</html>